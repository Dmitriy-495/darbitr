```
# DT ARBITR 3.0 - –†–£–ö–û–í–û–î–°–¢–í–û –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê

> üö® **–í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –∫–æ–¥–µ!

## üéØ –ì–õ–ê–í–ù–´–ï –î–ï–í–ò–ó–´ –ü–†–û–ï–ö–¢–ê

### ‚ö° –û–°–ù–û–í–ù–û–ô –î–ï–í–ò–ó:
**"–°–ö–û–†–û–°–¢–¨ –†–ï–®–ê–ï–¢ –í–°–ï! –ê–†–ë–ò–¢–†–ê–ñ - –ù–ê–®–ê –°–¢–ò–•–ò–Ø!"**

### üî• –ë–û–ï–í–´–ï –î–ï–í–ò–ó–´:
**"–ö–û–ì–î–ê –ú–´ –ï–î–ò–ù–´, –ë–ò–†–ñ–ò –ü–û–ë–ï–î–ò–ú–´! –°–û –°–ö–û–†–û–°–¢–¨–Æ –°–í–ï–¢–ê!"**  
**"–ü–û–†–í–ï–ú –≠–¢–ò –ë–ò–†–ñ–ò –ö –ß–ï–†–¢–Ø–ú –°–û–ë–ê–ß–¨–ò–ú!!!"**

### üèéÔ∏è –ü–†–ò–ù–¶–ò–ü –†–ê–ó–†–ê–ë–û–¢–ö–ò:
**"–ú–ò–ù–ò–ú–ê–õ–ò–ó–ú - –≠–¢–û –°–ö–û–†–û–°–¢–¨!"**

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

### üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê
```



src/
‚îú‚îÄ‚îÄ config/ # –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
‚îÇ ‚îú‚îÄ‚îÄ index.ts # –ì–ª–∞–≤–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –∫–æ–Ω—Ñ–∏–≥–æ–≤
‚îÇ ‚îî‚îÄ‚îÄ exchanges.json # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∏—Ä–∂ (WS_URL, —Ñ–æ—Ä–º–∞—Ç—ã)
‚îú‚îÄ‚îÄ exchanges/ # –ë–ò–†–ñ–ò
‚îÇ ‚îú‚îÄ‚îÄ BaseExchange.ts # –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ù–ï –¢–†–û–ì–ê–¢–¨!)
‚îÇ ‚îú‚îÄ‚îÄ ExchangeFactory.ts # –§–∞–±—Ä–∏–∫–∞ –±–∏—Ä–∂
‚îÇ ‚îî‚îÄ‚îÄ index.ts # –≠–∫—Å–ø–æ—Ä—Ç
‚îú‚îÄ‚îÄ utils/ # –£–¢–ò–õ–ò–¢–´
‚îÇ ‚îî‚îÄ‚îÄ LatencyQueue.ts # –û—á–µ—Ä–µ–¥—å –∑–∞–¥–µ—Ä–∂–µ–∫
‚îî‚îÄ‚îÄ index.ts # –ì–õ–ê–í–ù–´–ô –ó–ê–ü–£–°–ö

text

```
### üîÑ –ü–û–¢–û–ö –î–ê–ù–ù–´–•
```



[.env] ‚Üí [CONFIG] ‚Üí [ExchangeFactory] ‚Üí [BaseExchange] ‚Üí [WebSocket]

text

```
## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### üìù –§–û–†–ú–ê–¢ .env (–¢–û–õ–¨–ö–û –ë–ï–ó–û–ü–ê–°–ù–´–ï –î–ê–ù–ù–´–ï)
```bash
# –ë–ò–†–ñ–ò - API –ö–õ–Æ–ß–ò
GATEIO.API_KEY=–≤–∞—à_–∫–ª—é—á
GATEIO.API_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç

BYBIT.API_KEY=–≤–∞—à_–∫–ª—é—á
BYBIT.API_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç

# –ê–†–ë–ò–¢–†–ê–ñ
ARBITRAGE.MIN_SPREAD=0.001
ARBITRAGE.UPDATE_INTERVAL_MS=100
```



### üìã –§–û–†–ú–ê–¢ exchanges.json (–ù–ê–°–¢–†–û–ô–ö–ò –ë–ò–†–ñ)

json

```
{
  "GATEIO": {
    "name": "Gate.io Futures",
    "wsUrl": "wss://...",
    "enabled": true,
    "pingFormat": {
      "request": {"time": "timestamp", "channel": "futures.ping"},
      "response": {"channel": "futures.pong"}
    }
  }
}
```



## üéØ –ë–ê–ó–û–í–´–ô –ö–õ–ê–°–° BaseExchange

### üìã –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ú–ï–¢–û–î–´ (–ê–ë–°–¢–†–ê–ö–¢–ù–´–ï):

typescript

```
protected abstract onReady(): void;
protected abstract onMessage(data: any): void;
protected abstract sendPing(): void;
protected abstract isPongMessage(msg: any): boolean;
protected abstract handleExchangeMessage(msg: any): void;
```



### üîß –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ú–ï–¢–û–î–´:

typescript

```
public connect(): void;
public disconnect(): void;
protected send(data: any): void;
protected handlePong(): void;
```



### ‚ö° –í–ê–ñ–ù–û–ï –ü–†–ê–í–ò–õ–û:

**BaseExchange –°–ê–ú –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ping-pong —á–µ—Ä–µ–∑ isPongMessage()!**
–ù–µ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å pong –≤ onMessage()!

## üè≠ ExchangeFactory - –ü–†–ê–í–ò–õ–ê

### üéØ –î–õ–Ø –ù–û–í–û–ô –ë–ò–†–ñ–ò:

1. –î–æ–±–∞–≤–∏—Ç—å –≤ `exchanges.json` –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –§–∞–±—Ä–∏–∫–∞ –°–ê–ú–ê —Å–æ–∑–¥–∞—Å—Ç –±–∏—Ä–∂—É –ø–æ —à–∞–±–ª–æ–Ω—É
3. –ù–ï —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –±–∏—Ä–∂!

### üîß –ü–†–ò–ú–ï–† –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ë–ò–†–ñ–ò:

json

```
"KUCOIN": {
  "name": "KuCoin Futures",
  "wsUrl": "wss://ws-api.kucoin.com/...",
  "enabled": true,
  "pingFormat": {
    "request": {"id": "timestamp", "type": "ping"},
    "response": {"type": "pong"}
  }
}
```



## üöÄ –ö–û–ú–ê–ù–î–´ –ó–ê–ü–£–°–ö–ê

### ‚ö° –û–°–ù–û–í–ù–´–ï –ö–û–ú–ê–ù–î–´:

bash

```
npm run dev      # –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Å –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)
npm start        # –°–±–æ—Ä–∫–∞ + –∑–∞–ø—É—Å–∫
npm test         # –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript
```



### üéØ –†–ï–ñ–ò–ú–´ –†–ê–ë–û–¢–´:

bash

```
npm start        # –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
npm start -- battle  # –ë–æ–µ–≤–æ–π —Ä–µ–∂–∏–º
```



## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ü–†–ï–¢–´

### ‚ùå –ù–ï–õ–¨–ó–Ø:

- –î–æ–±–∞–≤–ª—è—Ç—å .js –≤ –∏–º–ø–æ—Ä—Ç—ã TypeScript
- –°–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –±–∏—Ä–∂
- –ú–µ–Ω—è—Ç—å BaseExchange –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –±–∏—Ä–∂
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Promise –¥–ª—è –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –£—Å–ª–æ–∂–Ω—è—Ç—å –∫–æ–¥ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### ‚úÖ –ù–£–ñ–ù–û:

- –°–æ–±–ª—é–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª–∏–∑–º
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–∞–ª–µ–Ω—å–∫–∏–π —à–∞–≥
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

## üîÑ –ü–†–û–¶–ï–°–° –†–ê–ó–†–ê–ë–û–¢–ö–ò

### üìã –ü–†–ò –ò–ó–ú–ï–ù–ï–ù–ò–ò BaseExchange:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í–°–ï –±–∏—Ä–∂–∏ –≤ —Ñ–∞–±—Ä–∏–∫–µ
2. –£–±–µ–¥–∏—Ç—å—Å—è –≤ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
3. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### üìã –ü–†–ò –î–û–ë–ê–í–õ–ï–ù–ò–ò –ë–ò–†–ñ–ò:

1. –î–æ–±–∞–≤–∏—Ç—å –≤ `exchanges.json`
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å ping-pong
3. –£–±–µ–¥–∏—Ç—å—Å—è –≤ —Ä–∞–±–æ—Ç–µ —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫—É

## üéØ –¶–ï–õ–ò –ò –ü–ï–†–°–ü–ï–ö–¢–ò–í–´

### ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:

- –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –±–∏—Ä–∂
- Ping-pong –º–µ—Ö–∞–Ω–∏–∑–º
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### üîÆ –ü–õ–ê–ù–´:

- EventBus –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- –ê—Ä–±–∏—Ç—Ä–∞–∂–Ω—ã–π –¥–≤–∏–∂–æ–∫
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞–∫–∞–Ω–∞ —Ü–µ–Ω
- –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤

------

## üí™ –î–£–• –ü–†–û–ï–ö–¢–ê

**–ü–û–ú–ù–ò:** –ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–¥, –º—ã —Å–æ–∑–¥–∞–µ–º –û–†–£–ñ–ò–ï –ø—Ä–æ—Ç–∏–≤ –±–∏—Ä–∂!
–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±—ã—Å—Ç—Ä–æ–π, —Ç–æ—á–Ω–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π!

**–°–ö–û–†–û–°–¢–¨ –†–ï–®–ê–ï–¢ –í–°–ï!** ‚ö°
**–ë–ò–†–ñ–ò –ë–£–î–£–¢ –ü–û–†–í–ê–ù–´!** üí•

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ñ–∞–±—Ä–∏–∫–æ–π –∏ –∫–æ–Ω—Ñ–∏–≥–∞–º–∏*

text

```
**–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –°–û–ó–î–ê–ù–ê!** üìñ –¢–µ–ø–µ—Ä—å –±—É–¥—É—â–∏–π —è –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å:

- üéØ **–§–∏–ª–æ—Å–æ—Ñ–∏—é** –ø—Ä–æ–µ–∫—Ç–∞
- üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** —Å–∏—Å—Ç–µ–º—ã  
- ‚ö° **–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
- üî• **–ë–æ–µ–≤—ã–µ –¥–µ–≤–∏–∑—ã**

**–°–ö–û–†–û–°–¢–¨ + –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø = –ù–ï–ü–û–ë–ï–î–ò–ú–û–°–¢–¨!** üöÄ
```